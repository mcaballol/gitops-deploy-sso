kind: KeycloakClient
apiVersion: keycloak.org/v1alpha1
metadata:
  name: client-portal
  labels:
    app: sso
  annotations:
    argocd.argoproj.io/sync-wave: "2"
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
  namespace: rhsso-dev
spec:
  realmSelector:
    matchLabels:
      app: sso-test
  client:
    clientId: client-portal
    secret: client-portal
    clientAuthenticatorType: client-secret
    consentRequired: false
    standardFlowEnabled: true

    protocolMappers:
      - id: client-portal-protocolMappers-email-verified
        name: "email verified"
        protocol: "openid-connect"
        protocolMapper: "oidc-usermodel-property-mapper"
        consentRequired: false
        config: 
          "userinfo.token.claim": "true"
          "user.attribute": "emailVerified"
          "id.token.claim": "true"
          "access.token.claim": "true"
          "claim.name": "email_verified"
          "jsonType.label": "boolean"
        

      - id: client-portal-protocolMappers-org_name
        name: "org_name"
        protocol: "openid-connect"
        protocolMapper: "oidc-usermodel-attribute-mapper"
        consentRequired: false
        config: 
          "userinfo.token.claim": "false"
          "multivalued": "false"
          "user.attribute": "org_name"
          "id.token.claim": "true"
          "access.token.claim": "true"
          "claim.name": "org_name"
          "jsonType.label": "String"
    defaultClientScopes: 
      - "web-origins"
      - "acr"
      - "profile"
      - "roles"
      - "email"
      
    optionalClientScopes: 
      - "address"
      - "phone"
      - "offline_access"
      - "microprofile-jwt"
      